const axios = require('axios');

module.exports = (apikey, url) => {
  return new Promise(async (resolve, reject) => {
	try {
	  let response = await axios.post('https://shoti-api.libyzxy0.repl.co/api/add-shoti', { url, apikey });
	  resolve({
	    user: response.data.user,
	    video: response.data.data
	  })
	} catch (err) {
	  if(err.response.status === 401) {
	    reject({
	      code: 401, 
	      error: "Unauthorized apikey"
	    })
	  } else {
	    reject({
	      code: err.response.status, 
	      error: err.message
	    })
	  }
	}
  })
}